{% extends "links/admin/base.html" %}

{% block content %}
  <div class="row">
    <h1>
      Link: {{ link.short_id }}
      <small>{{ link.get_redirect_url }}</small>
    </h1>
  </div>
  <div class="row">
    <ul>
      <li><b>Destination</b>: {{ link.destination }}</li>
      <li><b>Created at</b>: {{ link.created_at }}</li>
    </ul>
  </div>
  <div class="row">
    <a href="/links/delete/{{ link.pk }}" class="btn btn-danger btn-sm">
      <span class="oi oi-trash"></span> Delete link
    </a>
  </div>
  <div class="row">
    <h2>Visits</h2>
  </div>
  <div class="row">
    {% if visits %}
      <table class="table table-striped">
        <thead class="thead-light">
        <tr>
          <th>Timestamp</th>
          <th>User agent</th>
          <th>IP</th>
        </tr>
      </thead>
      {% for visit in visits %}
        <tr>
          <td>{{ visit.created_at }}</td>
          <td>{{ visit.user_agent }}</td>
          <td>{{ visit.ip }}</td>
        </tr>
      {% endfor %}
      </table>
    {% else %}
      <p>No visits yet.</p>
    {% endif %}
  </div>
{% endblock %}
